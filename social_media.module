<?php

/**
 * Implements hook_menu().
 *
 * Provides a default page to explain what this module does.
 */
function social_media_menu() {
  $items = array();
  $path = drupal_get_path('module', 'social_media');

  $items['admin/content/social_media'] = array(
    'title' => 'Social Media Block',
    'description' => ' ',
    'page callback' => 'drupal_get_form',
    'access arguments' => array('administer social_media'),
    'page arguments' => array('social_media_admin_settings'),
    'type' => MENU_NORMAL_ITEM,
    'file' => 'social_media.admin.inc',
    'file path' => $path,
  );

  return $items;
}

/**
 * Implements hook_permission().
 */
function social_media_permission() {
  return array(
    'administer social_media' => array(
      'title' => t('Administer social_media'),
      'description' => t('Administer Social Media Block Settings'),
    ),
  );
}


/**
 * Simple page function to explain what the block example is about.
 */

// @todo FIX this
function social_media_admin_page() {
  $page = array(
    '#type' => 'markup',
    '#markup' => t('The Block Example provides three sample blocks which demonstrate the various block APIs. To experiment with the blocks, enable and configure them on <a href="@url">the block admin page</a>.', array('@url' => url('admin/structure/block'))),
  );
  return $page;
}

/**
 * Implements hook_block_info().
 *
 * This hook declares what blocks are provided by the module.
 */
function social_media_block_info() {
  // This hook returns an array, each component of which is an array of block
  // information. The array keys are the 'delta' values used in other block
  // hooks.
  //
  // The required block information is a block description, which is shown
  // to the site administrator in the list of possible blocks. You can also
  // provide initial settings for block weight, status, etc.
  //
  // Many options are defined in hook_block_info():

  $blocks['social_media'] = array(
    'info' => t('Social Media Block'),
    'status' => TRUE,
    'region' => 'footer',
    'visibility' => BLOCK_VISIBILITY_LISTED,
    'pages' => '<front>',
  );

  return $blocks;
}

/**
 * Implements hook_block_view().
 *
 * This hook generates the contents of the blocks themselves.
 */
function social_media_block_view($delta='') {
  $block = array();
  
  switch($delta) {
    case 'social_media' :
      $block['subject'] = variable_get('social_media_title');
      // The content of the block is typically generated by calling a custom
      // function.
      $variables = array();
      $variables['social_media_text'] = check_plain(variable_get('social_media_text'));
      $variables['social_media_facebook'] = check_plain(variable_get('social_media_facebook'));
      $variables['social_media_twitter'] = check_plain(variable_get('social_media_twitter'));
      $variables['social_media_google'] = check_plain(variable_get('social_media_google'));
      $variables['social_media_instagram'] = check_plain(variable_get('social_media_instagram'));
      $variables['social_media_email'] = check_plain(variable_get('social_media_email'));
      $variables['social_media_fa'] = variable_get('social_media_fa');


      $block['content'] = theme('social_media_block', $variables);

      // drupal_add_js(drupal_get_path('module', 'social_media') . '/social_media.js');

      break;
    }

  return $block;
}


//implementation of hook_theme
function social_media_theme() {
  return array(
    'social_media_block' => array(
      'variables' => array(),
      'template' => 'social_media',
    ),
  );
}

